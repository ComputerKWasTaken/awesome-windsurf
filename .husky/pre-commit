#!/bin/sh

# This hook runs linting and handles version bumps
# Logic:
# 1. Runs lint-staged to format files
# 2. Special handling for version bumps:
#    - Detects if package.json version changed
#    - If yes, skips additional checks
#    - Allows release commits to proceed smoothly

# Run lint-staged first to ensure files are properly formatted
npx lint-staged

# Check if this is a version bump commit
if git diff --cached --name-only | grep -q "package.json"; then
  if git diff --cached package.json | grep -q '"version":'; then
    # Skip changelog check for version bump commits
    exit 0
  fi
fi
